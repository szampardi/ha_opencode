---
name: "HA OpenCode"
description: "AI coding agent for editing Home Assistant configuration with deep MCP integration and LSP support"
version: "2.0.0"
slug: "ha_opencode"
image: "docker.io/nexus166/ha_opencode"
url: "https://github.com/szampardi/ha_opencode"
arch:
  - aarch64
  - amd64
startup: application
init: false

# Ingress configuration
ingress: true
ingress_port: 4096
ingress_stream: true
panel_icon: mdi:robot
panel_title: HA OpenCode

# Direct access port (optional)
ports:
  4096/tcp: 4096
ports_description:
  4096/tcp: OpenCode web UI (direct access)

# File access - Home Assistant config directory
map:
  - type: homeassistant_config
    read_only: false

# API access - needed for logs
hassio_api: true
hassio_role: default
homeassistant_api: true

# Security - keep permissions minimal
host_network: false
privileged: []
apparmor: true

# User-configurable options
options:
  # Feature toggles
  mcp_enabled: false
  lsp_enabled: true

schema:
  # Feature toggles
  mcp_enabled: bool
  lsp_enabled: bool

# Exclude caches from backups
backup_exclude:
  - ".npm/*"
  - ".cache/*"
  - ".local/share/opencode/cache/*"
